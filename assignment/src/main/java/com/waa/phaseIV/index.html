<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Assignment</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

<div class="mt-5">
    <h3 class="text-center">RECORDS</h3>
    <hr>

    <button class="btn-success ml-5" id="submit"> Add</button>

    <table class="table">
        <thead class="thead-light">
        <tr>
            <th scope="col">#</th>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Email</th>
            <th scope="col">Major</th>
            <th scope="col">Courses</th>
            <th scope="col">Others</th>
        </tr>
        </thead>
        <tbody id="row-Data">
        </tbody>
    </table>
</div>


<script>
    let rowData = document.getElementById("row-Data")
    let editButton = document.getElementsByClassName("edit-button");
    let deleteButton = document.getElementsByClassName("delete-button");
    async function get() {
        try {
            let response = await fetch("http://localhost:8080/studentsMapperDto");
            let result = await response.json();
            console.log(result);
            if (result != null) {
                for (i = 0; i < result.length; i++) {
                    let courses = "";
                    for (j = 0; j < result[i].courseList.length; j++) {
                        courses += result[i].courseList[j].name + ", ";
                    }
                    courses = courses.slice(0, -2);
                    rowData.innerHTML += `<tr>
                       <td> ${result[i].id}</td>
                        <td>${result[i].firstName}</td>
                        <td>${result[i].lastName}</td>
                        <td>${result[i].email}</td>
                        <td>${result[i].major}</td>
                        <td>${courses}</td>
                        <td> <button class="btn-primary edit-button" id={result[i].id}> Edit</button></td>
                        <td> <button class="btn-warning delete-button"  id={result[i].id} > Delete</button></td>
                    </tr>`
                }
            }
        } catch (e) {
            alert(e);
        }
    }
    get();

    editButton.addEventListener(function (){
        
    })


</script>
</body>
</html>